<div class ="modal-header">
  <h5 class="modal-title">DETAIL DE LA SERIE</h5>
  <button type="button" class="close btn btn-danger" data-dismiss="modal" aria-label="close">
          <span aria-hidden="true">&times;</span>
  </button>
</div>

<div class="modal-body">
  COTE: <strong class="cote">{{serie.cote}}</strong>
  <h5>NOM : {{serie.nom}}</h5>
</div>

<div class="modal-footer">
<a href="#" class="btn btn-primary update_serie"><i class="fa fa-info"></i> MODIFIER</a>
<a href="#" class="btn btn-danger delete_serie"><i class="fa fa-info"></i> SUPPRIMER</a>
<a href="#" class="btn btn-success add_sserie"><i class="fa fa-info"></i> Ajouter une sous-serie</a>
</div>

<script type="text/javascript"> 

            $('.update_serie').on('click' , function(){
              var el = $('#modal-detailserie .cote')
              var cote= $(el).text()
              $.ajax({
                  url:'/repertoire/serie/'+ cote + '/update',
                  type:'get',
                  datatype:'json',
                  beforeSend: function(){
                    $('#modal-detailserie').modal('hide');
                    $('#modal-serie-update').modal('show');
                     },
                  success: function(data){
                     $('#modal-serie-update .modal-content').html(data.html);
                     }
              });
            });

            $('#modal-serie-update').one('submit', '.form-update-serie', function(e){
              e.preventDefault();
              var form = $(this);
              $.ajax({
                url : form.attr('data-url'),
                data: form.serialize(),
                type: form.attr('method'),
                dataType:'json',
                success: function(data){

                  $('#modal-serie-update').modal('hide');

                }

              })
              return false;

            });


  $('.add_sserie').on('click' , function(){
    var el = $('#modal-detailserie .cote')
    var cote= $(el).text()
    $.ajax({
    url:'/repertoire/serie/'+cote+'/add/sousserie',
    type:'get',
    datatype:'json',
    beforeSend: function(){
      $('#modal-detailserie').modal('hide');
      $('#modal-sousserie').modal('show');
    },
    success: function(data){
      $('#modal-sousserie .modal-content').html(data.html_form);
    }
    });
  });

    $('#modal-sousserie').one('submit','.add-sousserie', function(e){
      var form = $(this);
      $.ajax({
        url : form.attr('data-url'),
        data: form.serialize(),
        type: form.attr('method'),
        dataType:'json',
        success: function(data){
          $('#modal-sousserie').modal('hide');
        
        }

      });
      return false;
    });  



            $('.delete_serie').on('click' , function(){
              var el = $('#modal-detailserie .cote')
              var cote = $(el).text()
              $.ajax({
                  url:'/repertoire/serie/'+ cote +'/delete',
                  type:'get',
                  datatype:'json',
                  beforeSend: function(){
                     $('#modal-detailserie').modal('hide');
                     $('#modal-delete-serie').modal('show');
                     },
                  success: function(data){
                     $('#modal-delete-serie .modal-content').html(data.html);
                     }
              });
            });

            $('#modal-delete-serie').one('submit', '.form-delete-serie', function(){
              var form = $(this);
              $.ajax({
                url : form.attr('data-url'),
                data: form.serialize(),
                type: form.attr('method'),
                dataType:'json',
                success: function(data){

                  $('#modal-delete-serie').modal('hide');

                }

              })
              return false;

            });


          </script>

        
